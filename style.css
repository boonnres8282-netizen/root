let currentPage = 0;
const pages = document.querySelectorAll(".page");
const wrapper = document.getElementById("wrapper");
let isScrolling = false;

function scrollToPage(index) {
  if (index < 0 || index >= pages.length) return;
  isScrolling = true;
  currentPage = index;
  wrapper.style.transform = `translateY(-${index * 100}vh)`;
  setTimeout(() => isScrolling = false, 700);
}

// mouse wheel (‡∏Ñ‡∏≠‡∏°)
window.addEventListener("wheel", (e) => {
  if (isScrolling) return;
  if (e.deltaY > 0) scrollToPage(currentPage + 1);
  else scrollToPage(currentPage - 1);
});

// touch (‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
let startY = 0;
window.addEventListener("touchstart", e => {
  startY = e.touches[0].clientY;
});

window.addEventListener("touchend", e => {
  let endY = e.changedTouches[0].clientY;
  if (isScrolling) return;
  if (startY - endY > 50) scrollToPage(currentPage + 1);
  if (endY - startY > 50) scrollToPage(currentPage - 1);
});

// PIN
function checkPin() {
  const pin = document.getElementById("pin").value;
  if (pin === "1402") scrollToPage(currentPage + 1);
  else alert("‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡∏∞ üíî");
}

// TIMER
const startDate = new Date("2024-02-14");
setInterval(() => {
  const now = new Date();
  const diff = now - startDate;
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  document.getElementById("timer").innerText =
    `${days} ‡∏ß‡∏±‡∏ô ${Math.floor(diff / 3600000) % 24} ‡∏ä‡∏°. ‚ù§Ô∏è`;
}, 1000);
